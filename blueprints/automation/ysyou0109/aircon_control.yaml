blueprint:
  name: í†µí•© ì—ì–´ì»¨ ìë™í™” (ë¶€ìŠ¤íŠ¸Â·ì¼ë°˜Â·ì œìŠµÂ·ì¢…ë£Œ)
  description: >
    ## ğŸ® í†µí•© ì—ì–´ì»¨ ìë™í™” ë¸”ë£¨í”„ë¦°íŠ¸
    ì´ ë¸”ë£¨í”„ë¦°íŠ¸ëŠ” ê°€ìƒ ìŠ¤ìœ„ì¹˜, ì‹¤ë‚´ ì˜¨Â·ìŠµë„ ì„¼ì„œ, ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì—ì–´ì»¨ì„ ì§€ëŠ¥ì ìœ¼ë¡œ ì œì–´í•©ë‹ˆë‹¤.
    **ë¶€ìŠ¤íŠ¸, ì¼ë°˜ ëƒ‰ë°©, ì œìŠµ, ë¶ˆì¾Œì§€ìˆ˜ ê¸°ë°˜ ìš´ì „, ìë™ ê±´ì¡° ì¢…ë£Œ** ë“± ì—¬ëŸ¬ ê¸°ëŠ¥ì„ í•˜ë‚˜ë¡œ í†µí•©í•˜ì—¬, ì‚¬ìš©ìì˜ í™˜ê²½ê³¼ ì„¤ì •ì— ë§ì¶° ìµœì ì˜ ìš´ì „ ëª¨ë“œë¥¼ ìë™ìœ¼ë¡œ ì„ íƒí•˜ê³  ì „í™˜í•©ë‹ˆë‹¤.

    ---

    ### âš™ï¸ ì£¼ìš” ê¸°ëŠ¥ ë° ì‘ë™ ë¡œì§

    #### 1. ì¼œì§ & ë¶€ìŠ¤íŠ¸ ëª¨ë“œ
      - **ìë™ ì‹œì‘**: ê°€ìƒ ìŠ¤ìœ„ì¹˜ë¥¼ ì¼œê±°ë‚˜, ì—ì–´ì»¨ì´ ì§ì ‘ ì¼œì§€ë©´(ëƒ‰ë°©/ì œìŠµ/ì†¡í’) ìë™í™”ê°€ ì‹œì‘ë©ë‹ˆë‹¤.
      - **ë¶€ìŠ¤íŠ¸ ëª¨ë“œ**: ìë™í™” ì‹œì‘ ì‹œ ì‹¤ë‚´ ì˜¨ë„ê°€ ì„¤ì •ëœ 'ë¶€ìŠ¤íŠ¸ ê¸°ì¤€ ì˜¨ë„'ë³´ë‹¤ ë†’ìœ¼ë©´, ì¦‰ì‹œ **ìµœì € ì˜¨ë„(18â„ƒ)ì™€ ìµœëŒ€ íŒ¬ ì†ë„**ë¡œ ê°•ë ¥í•˜ê²Œ ëƒ‰ë°©ì„ ì‹œì‘í•©ë‹ˆë‹¤. (ì„¤ì •ì‹œê°„ì´ 0ì¼ê²½ìš° ì‘ë™í•˜ì§€ ì•ŠìŒ)
      - **ì§€ëŠ¥ì  ì¢…ë£Œ**: ë¶€ìŠ¤íŠ¸ ëª¨ë“œëŠ” ì•„ë˜ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¼ë„ ë¨¼ì € ë§Œì¡±í•˜ë©´ ì¦‰ì‹œ ì¢…ë£Œë˜ê³  ì¼ë°˜ ëƒ‰ë°©ìœ¼ë¡œ ì „í™˜ë©ë‹ˆë‹¤.
          - ì„¤ì •ëœ ìµœëŒ€ ì§€ì† ì‹œê°„ì´ ë‹¤ ë˜ì—ˆì„ ë•Œ
          - ì‹¤ë‚´ ì˜¨ë„ê°€ 'ì¼ë°˜ ëƒ‰ë°© ì„¤ì • ì˜¨ë„'ì— ë„ë‹¬í–ˆì„ ë•Œ
          - ë¶ˆì¾Œì§€ìˆ˜ê°€ 'ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜'ì— ë„ë‹¬í–ˆì„ ë•Œ
          - ì‚¬ìš©ìê°€ ê°€ìƒ ìŠ¤ìœ„ì¹˜ë¥¼ ê»ì„ ë•Œ

    #### 2. ë¶ˆì¾Œì§€ìˆ˜ ê¸°ë°˜ ìë™ ìš´ì „
      - ìë™í™”ê°€ ì¼œì ¸ ìˆëŠ” ë™ì•ˆ, **ì˜¨ë„ì™€ ìŠµë„ ë³€í™”ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ê°ì§€**í•˜ì—¬ ì•„ë˜ì™€ ê°™ì´ ìµœì ì˜ ëª¨ë“œë¡œ ìë™ ì „í™˜í•©ë‹ˆë‹¤.
      - **(ğŸ’§ ì œìŠµ ìš°ì„ )**: ìŠµë„ê°€ 'ì œìŠµ ê¸°ì¤€ ìŠµë„'ë³´ë‹¤ ë†’ìœ¼ë©´, **ì œìŠµ ëª¨ë“œ**ë¥¼ ìµœìš°ì„ ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. (ì œìŠµ 10ë¶„ â†’ ëƒ‰ë°© 5ë¶„)
      - **(ğŸŒ¡ï¸ ì§€ìˆ˜ ë†’ìŒ)**: ë¶ˆì¾Œì§€ìˆ˜ê°€ 'ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ + í—ˆìš© ì˜¤ì°¨'ë³´ë‹¤ ë†’ìœ¼ë©´, **ê°•ë ¥ ëƒ‰ë°©**ì„ 10ë¶„ê°„ ì‹¤í–‰í•©ë‹ˆë‹¤.
      - **(ğŸƒ ì§€ìˆ˜ ë‚®ìŒ)**: ë¶ˆì¾Œì§€ìˆ˜ê°€ 'ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ - í—ˆìš© ì˜¤ì°¨'ë³´ë‹¤ ë‚®ìœ¼ë©´, **ì†¡í’ ëª¨ë“œ**ë¥¼ 10ë¶„ê°„ ì‹¤í–‰í•˜ì—¬ ì—ë„ˆì§€ë¥¼ ì ˆì•½í•©ë‹ˆë‹¤.
      - **(âš–ï¸ ì§€ìˆ˜ ì ì •)**: ë¶ˆì¾Œì§€ìˆ˜ê°€ ëª©í‘œ ë²”ìœ„ ë‚´ì— ìˆìœ¼ë©´, **ì†¡í’ ëª¨ë“œ(10ë¶„)ì™€ ëƒ‰ë°©(5ë¶„)ì„ ë°˜ë³µ**í•˜ì—¬ ì¾Œì í•¨ì„ ìœ ì§€í•©ë‹ˆë‹¤.
      - **ë™ì  ë°˜ì‘**: ì–´ë–¤ ëª¨ë“œê°€ ì‘ë™ ì¤‘ì´ë”ë¼ë„, í™˜ê²½ì´ ë³€í•˜ë©´ ì¦‰ì‹œ ê¸°ì¡´ ë™ì‘ì„ ë©ˆì¶”ê³  í˜„ì¬ ìƒí™©ì— ê°€ì¥ ì í•©í•œ ëª¨ë“œë¡œ ë‹¤ì‹œ íŒë‹¨í•˜ì—¬ ì „í™˜í•©ë‹ˆë‹¤.

    #### 3. êº¼ì§ & ìë™ ê±´ì¡° ì¢…ë£Œ ëª¨ë“œ
      - **ìë™ ë™ê¸°í™”**: ë¦¬ëª¨ì»¨ ë“±ìœ¼ë¡œ ì—ì–´ì»¨ì„ ì§ì ‘ ë„ë©´, ê°€ìƒ ìŠ¤ìœ„ì¹˜ë„ ìë™ìœ¼ë¡œ êº¼ì§‘ë‹ˆë‹¤.
      - **ìë™ ê±´ì¡°**: ê°€ìƒ ìŠ¤ìœ„ì¹˜ë¥¼ ë„ë©´, ì„¤ì •ëœ ì‹œê°„ë§Œí¼ **ì†¡í’ ëª¨ë“œë¥¼ ì‹¤í–‰í•˜ì—¬ ì—ì–´ì»¨ ë‚´ë¶€ë¥¼ ê±´ì¡°**ì‹œí‚¨ í›„ ì „ì›ì„ ì™„ì „íˆ ì°¨ë‹¨í•©ë‹ˆë‹¤. (ê³°íŒ¡ì´ ë°©ì§€) (ì„¤ì •ì‹œê°„ì´ 0ì¼ê²½ìš° ì‘ë™í•˜ì§€ ì•ŠìŒ)
      - **ëª…ë ¹ ìš°ì„ **: ìë™ ê±´ì¡°(ì†¡í’)ê°€ ì‘ë™í•˜ëŠ” ì¤‘ì—ë¼ë„, ì‚¬ìš©ìê°€ ë§ˆìŒì„ ë°”ê¿” ë‹¤ì‹œ ìŠ¤ìœ„ì¹˜ë¥¼ ì¼œê±°ë‚˜ ì—ì–´ì»¨ì„ ëƒ‰ë°©ìœ¼ë¡œ ì¼œë©´, **ì¦‰ì‹œ ê±´ì¡°ë¥¼ ì¤‘ë‹¨í•˜ê³  ì‚¬ìš©ìì˜ ëª…ë ¹ì— ë”°ë¼ ëƒ‰ë°©ì„ ë‹¤ì‹œ ì‹œì‘**í•©ë‹ˆë‹¤.

    ---
    
    ## ì„¤ì •ë°©ë²•
    
      (2. ìë™í™” ì œì–´ìŠ¤ìœ„ì¹˜)- ì•„ë˜ë¡œ í™”ì‚´í‘œë¥¼ ëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ë¥¼ ìŠ¤í¬ë¡¤ í•˜ì‹œë©´ **+ìƒˆë¡œìš´ í† ê¸€ ë„ìš°ë¯¸ ë§Œë“¤ê¸°** ë¼ëŠ” í•­ëª©ì´ìˆìŠµë‹ˆë‹¤. 
      í´ë¦­í•˜ì‹œê³  ì´ë¦„ ì§€ì •í•˜ì‹œê³  **ë§Œë“¤ê¸°** ëˆŒëŸ¬ì£¼ì„¸ìš” ê·¸ë‹¤ìŒ ë°©ê¸ˆ ë§Œë“œì‹  í† ê¸€ ë„ìš°ë¯¸ ì„ íƒ
      (7. í˜„ì¬ ë¶ˆì¾Œì§€ìˆ˜ ì„¼ì„œ): ì•„ë˜í™”ì‚´í‘œëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤- **+ìƒˆë¡œìš´ ìˆ«ìë„ìš°ë¯¸ ë§Œë“¤ê¸°** í´ë¦­- ê³ ê¸‰ì„¤ì •- ìµœì†Ÿê°’ 60, ìµœëŒ“ê°’ 80,ìŠ¬ë¼ì´ë”ê°„ê²© 0.1 ë‹¨ìœ„DI 
      (8. ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ ì„¤ì •): ì•„ë˜í™”ì‚´í‘œëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤- **+ìƒˆë¡œìš´ ìˆ«ìë„ìš°ë¯¸ ë§Œë“¤ê¸°** í´ë¦­- ê³ ê¸‰ì„¤ì •- ìµœì†Ÿê°’ 60, ìµœëŒ“ê°’ 80,ìŠ¬ë¼ì´ë”ê°„ê²© 0.1 ë‹¨ìœ„DI 
      (12. ì œìŠµëª¨ë“œ ì‹œì‘ìŠµë„): ì•„ë˜í™”ì‚´í‘œëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤- **+ìƒˆë¡œìš´ ìˆ«ìë„ìš°ë¯¸ ë§Œë“¤ê¸°** í´ë¦­- ê³ ê¸‰ì„¤ì •- ìµœì†Ÿê°’ 40, ìµœëŒ“ê°’ 75,ìŠ¬ë¼ì´ë”ê°„ê²© 1 ë‹¨ìœ„%
      (13. (ë‚´ë¶€ìš©) ìë™í™” ì „ìš© íƒ€ì´ë¨¸): ì•„ë˜í™”ì‚´í‘œëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤- **+ìƒˆë¡œìš´ íƒ€ì´ë¨¸ ë§Œë“¤ê¸°** -haê°€ ì‹œì‘ë ë•Œ ìƒíƒœ ë°‘ ì‹œê°„ ë³µì›- ì²´í¬- ë§Œë“¤ê¸°
      (13-1(ë‚´ë¶€ìš©) ì˜¤ë¥˜ ë°©ì§€ìš© ì‹œê°„ ê¸°ë¡):ì•„ë˜í™”ì‚´í‘œëˆ„ë¥´ì‹œê³  ë§¨ë°‘ìœ¼ë¡œ ë§ˆìš°ìŠ¤ ìŠ¤í¬ë¡¤- **+ìƒˆë¡œìš´ ë‚ ì§œì™€ì‹œê°„ ë§Œë“¤ê¸°** ë‚ ì§œì™€ì‹œê°„ ì„ íƒ
      (13-2~13-6): ìƒˆë¡œìš´ í† ê¸€ë„ìš°ë¯¸ ë§Œë“¤ê¸°ë¡œ ê°ê° ë§Œë“¤ê¸°
      (14 ìë™í™” ì‘ë™ ê¸°ë¡ (ë¡œê·¸)): ìƒˆë¡œìš´í…ìŠ¤íŠ¸ ë„ìš°ë¯¸ ë§Œë“¤ê¸° ê³ ê¸‰ì„¤ì •ë³€ê²½ì—†ìŒ
      
      
      ### **ì„¤ì •í•˜ì‹ í›„ ëª©í‘œë¶ˆì¾Œì§€ìˆ˜ì™€ ì œìŠµì‹œì‘ ìŠµë„ëŠ” êµ¬ì„±ìš”ì†Œë¥¼ ì°¾ìœ¼ì…”ì„œ ì„¤ì •ê°’ì„ ì…ë ¥í•˜ì…”ì•¼í•©ë‹ˆë‹¤.**
  domain: automation
  input:
    # ------------------ ê¸°ë³¸ ì„¤ì • ------------------
    climate_entity:
      name: "1.â„ï¸ ì—ì–´ì»¨ ì„ íƒ"
      description: "ìë™í™”ë¡œ ì œì–´í•  ì—ì–´ì»¨(climate) ì—”í‹°í‹°ë¥¼ ì„ íƒí•˜ì„¸ìš”."
      selector:
        entity:
          domain: climate
    input_boolean_switch:
      name: "2.ğŸ•¹ï¸ ìë™í™” ì œì–´ ìŠ¤ìœ„ì¹˜"
      description: "ìë™í™”ì˜ ë©”ì¸ ON/OFFë¥¼ ë‹´ë‹¹í•˜ëŠ” ê°€ìƒ ìŠ¤ìœ„ì¹˜ì…ë‹ˆë‹¤. ì´ ìŠ¤ìœ„ì¹˜ë¥¼ ì¼œë©´ ìë™í™”ê°€ ì‹œì‘ë©ë‹ˆë‹¤."
      selector:
        entity:
          domain: input_boolean
    temperature_sensor:
      name: "3.ğŸŒ¡ï¸ í˜„ì¬ ì˜¨ë„ ì„¼ì„œ"
      description: "ì‹¤ë‚´ ì˜¨ë„ë¥¼ ì¸¡ì •í•˜ëŠ” ì„¼ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”."
      selector:
        entity:
          domain: sensor
          device_class: temperature
    humidity_sensor:
      name: "4.ğŸ’§ í˜„ì¬ ìŠµë„ ì„¼ì„œ"
      description: "ì‹¤ë‚´ ìŠµë„ë¥¼ ì¸¡ì •í•˜ëŠ” ì„¼ì„œë¥¼ ì„ íƒí•˜ì„¸ìš”."
      selector:
        entity:
          domain: sensor
          device_class: humidity

    # ------------------ ë¶€ìŠ¤íŠ¸ ëª¨ë“œ ì„¤ì • ------------------
    input_number_boost_threshold:
      name: "5.ğŸš€ ë¶€ìŠ¤íŠ¸ ëª¨ë“œ ì‹œì‘ ì˜¨ë„"
      description: "ì‹¤ë‚´ ì˜¨ë„ê°€ ì´ ê°’ë³´ë‹¤ ë†’ìœ¼ë©´, ìë™í™” ì‹œì‘ ì‹œ ë¶€ìŠ¤íŠ¸ ëª¨ë“œê°€ ì‘ë™í•©ë‹ˆë‹¤."
      default: 24
      selector:
        number:
          min: 20
          max: 30
          unit_of_measurement: "Â°C"
          mode: slider
    input_number_boost_duration:
      name: "5-1â±ï¸ ë¶€ìŠ¤íŠ¸ ëª¨ë“œ ìµœëŒ€ ì§€ì† ì‹œê°„ (ë¶„)"
      description: "ë¶€ìŠ¤íŠ¸ ëª¨ë“œì˜ ìµœëŒ€ ì‘ë™ ì‹œê°„ì…ë‹ˆë‹¤. ì¡°ê±´ ë§Œì¡± ì‹œ ì¡°ê¸° ì¢…ë£Œë˜ë©°, 0ìœ¼ë¡œ ì„¤ì • ì‹œ ë¹„í™œì„±í™”ë©ë‹ˆë‹¤."
      default: 10
      selector:
        number:
          min: 0
          max: 30
          unit_of_measurement: "ë¶„"
          mode: slider
    boost_aircon_fan_mode:
      name: "5-2ğŸ’¨ ë¶€ìŠ¤íŠ¸ ëª¨ë“œ íŒ¬ ì†ë„"
      description: "ë¶€ìŠ¤íŠ¸ ëª¨ë“œì—ì„œ ì‚¬ìš©í•  íŒ¬ ì†ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: high, turbo, POWER)."
      default: "POWER"
      selector:
        text: {}

    # ------------------ ì¼ë°˜ ëƒ‰ë°© ë° ë¶ˆì¾Œì§€ìˆ˜ ì„¤ì • ------------------
    input_number_general_temperature:
      name: "6.ğŸ¯ ì—ì–´ì»¨ì„¤ì • ì˜¨ë„"
      description: "ì—ì–´ì»¨ ì¼ë°˜ëª¨ë“œ ì„¤ì •ì˜¨ë„. ë¶€ìŠ¤íŠ¸ ëª¨ë“œ ì¢…ë£Œ ì‹œ ì´ ì˜¨ë„ë¡œ ì—ì–´ì»¨ì´ ì„¤ì •ë©ë‹ˆë‹¤."
      default: 23
      selector:
        number:
          min: 20
          max: 29
          unit_of_measurement: "Â°C"
          mode: slider
    input_number_now_discomfort:
      name: "7.ğŸ“Š í˜„ì¬ ë¶ˆì¾Œì§€ìˆ˜ ì„¼ì„œ"
      description: "ì˜¨ë„ì™€ ìŠµë„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ê³„ì‚°ëœ í˜„ì¬ ë¶ˆì¾Œì§€ìˆ˜ ê°’ì„ í‘œì‹œí•˜ëŠ” ì„¼ì„œì…ë‹ˆë‹¤."
      selector:
        entity:
          domain: input_number
    input_number_target_discomfort:
      name: "8.ğŸ‘ ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ ì„¤ì •"
      description: "ì‚¬ìš©ìê°€ ì¾Œì í•˜ë‹¤ê³  ëŠë¼ëŠ” ë¶ˆì¾Œì§€ìˆ˜ ê°’ì„ ì„¤ì •í•©ë‹ˆë‹¤. (ë³´í†µ 68~72 ì‚¬ì´)"
      selector:
        entity:
          domain: input_number
    input_number_tolerance:
      name: "9.âš–ï¸ ë¶ˆì¾Œì§€ìˆ˜ í—ˆìš© ì˜¤ì°¨"
      description: "ëª©í‘œ ë¶ˆì¾Œì§€ìˆ˜ ê°’ì—ì„œ ë²—ì–´ë‚˜ë„ í—ˆìš©í•  ë²”ìœ„ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤."
      default: 0.1
      selector:
        number:
          min: 0.0
          max: 1.0
          step: 0.1
          mode: slider
    general_aircon_fan_mode:
      name: "10.ğŸƒ ì¼ë°˜ ìš´ì „ ì‹œ íŒ¬ ì†ë„"
      description: "ë¶ˆì¾Œì§€ìˆ˜ ê¸°ë°˜ ìš´ì „ ì‹œ ì‚¬ìš©í•  íŒ¬ ì†ë„ë¥¼ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: auto, low, medium)."
      default: "auto"
      selector:
        text: {}
    high_aircon_fan_mode:
      name: "11.ğŸŒªï¸ ê°•ë ¥ ìš´ì „ ì‹œ íŒ¬ ì†ë„"
      description: "ì œìŠµ ë˜ëŠ” ë¶ˆì¾Œì§€ìˆ˜ê°€ ë†’ì„ ë•Œ ë“±, ê°•ë ¥í•œ ìš´ì „ì´ í•„ìš”í•  ë•Œ ì‚¬ìš©í•  íŒ¬ ì†ë„ì…ë‹ˆë‹¤."
      default: "high"
      selector:
        text: {}

    # ------------------ ì œìŠµ ë° ì¢…ë£Œ ëª¨ë“œ ì„¤ì • ------------------
    input_number_dehumid_threshold:
      name: "12.ğŸ’§ ì œìŠµ ëª¨ë“œ ì‹œì‘ ìŠµë„"
      description: "ì‹¤ë‚´ ìŠµë„ê°€ ì´ ê°’ë³´ë‹¤ ë†’ìœ¼ë©´, ì œìŠµ ëª¨ë“œê°€ ìš°ì„ ì ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤."
      selector:
        entity:
          domain: input_number
    input_number_shutdown_delay:
      name: "12-1â³ ìë™ ê±´ì¡° ì‹œê°„ (ë¶„)"
      description: "ì—ì–´ì»¨ ì¢…ë£Œ ì‹œ, ë‚´ë¶€ ê³°íŒ¡ì´ ë°©ì§€ë¥¼ ìœ„í•´ ì†¡í’ìœ¼ë¡œ ê±´ì¡°í•  ì‹œê°„ì„ ì„¤ì •í•©ë‹ˆë‹¤. (0ìœ¼ë¡œ ì„¤ì • ì‹œ ë¹„í™œì„±í™”)"
      default: 30
      selector:
        number:
          min: 0
          max: 60
          unit_of_measurement: "ë¶„"
          mode: slider

    # ------------------ ë‚´ë¶€ ìƒíƒœ í™•ì¸ìš© (ê³ ê¸‰) ------------------
    automation_timer:
      name: "13.(ë‚´ë¶€ìš©) ìë™í™” ì „ìš© íƒ€ì´ë¨¸"
      description: "ìë™í™”ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì‹œê°„ì„ ì¸¡ì •í•  ë•Œ ì‚¬ìš©í•  íƒ€ì´ë¨¸ í—¬í¼ë¥¼ ì„ íƒí•˜ì„¸ìš”."
      selector:
        entity:
          domain: timer
    input_time_tracker:
      name: "13-1(ë‚´ë¶€ìš©) ì˜¤ë¥˜ ë°©ì§€ìš© ì‹œê°„ ê¸°ë¡"
      description: "ë‚´ë¶€ ëª¨ë“œê°€ ë¹„ì •ìƒì ìœ¼ë¡œ ì˜¤ë˜ ì‹¤í–‰ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ì‹œì‘ ì‹œê°„ì„ ê¸°ë¡í•©ë‹ˆë‹¤."
      selector:
        entity:
          domain: input_datetime
    input_boost_mode:
      name: "13-2(ìƒíƒœ í‘œì‹œìš©) ë¶€ìŠ¤íŠ¸ ëª¨ë“œ"
      description: "ìë™í™”ê°€ ë¶€ìŠ¤íŠ¸ ëª¨ë“œë¡œ ì‘ë™ ì¤‘ì¸ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (ì§ì ‘ ì¡°ì‘ ê¸ˆì§€)"
      selector:
        entity:
          domain: input_boolean
    input_dry_mode:
      name: "13-3(ìƒíƒœ í‘œì‹œìš©) ì œìŠµ ëª¨ë“œ"
      description: "ìë™í™”ê°€ ì œìŠµ ëª¨ë“œë¡œ ì‘ë™ ì¤‘ì¸ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (ì§ì ‘ ì¡°ì‘ ê¸ˆì§€)"
      selector:
        entity:
          domain: input_boolean
    input_index_mode:
      name: "13-4(ìƒíƒœ í‘œì‹œìš©) ë¶ˆì¾Œì§€ìˆ˜ ëª¨ë“œ"
      description: "ìë™í™”ê°€ ë¶ˆì¾Œì§€ìˆ˜ ê¸°ë°˜ìœ¼ë¡œ ìš´ì „ ì¤‘ì¸ì§€ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (ì§ì ‘ ì¡°ì‘ ê¸ˆì§€)"
      selector:
        entity:
          domain: input_boolean
    input_end_mode:
      name: "13-5(ìƒíƒœ í‘œì‹œìš©) ìë™ ê±´ì¡° ëŒ€ê¸°"
      description: "ìë™ ê±´ì¡° ê¸°ëŠ¥ì´ í™œì„±í™”ë  ì¤€ë¹„ê°€ ë˜ì—ˆìŒì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (ì§ì ‘ ì¡°ì‘ ê¸ˆì§€)"
      selector:
        entity:
          domain: input_boolean
    input_end_mode_now:
      name: "13-6(ìƒíƒœ í‘œì‹œìš©) ìë™ ê±´ì¡° ì‘ë™ ì¤‘"
      description: "í˜„ì¬ ìë™ ê±´ì¡° ê¸°ëŠ¥ì´ ì‘ë™ ì¤‘ì„ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤. (ì§ì ‘ ì¡°ì‘ ê¸ˆì§€)"
      selector:
        entity:
          domain: input_boolean
    input_log:
      name: "14.âœï¸ ìë™í™” ì‘ë™ ê¸°ë¡ (ë¡œê·¸)"
      description: "ìë™í™”ì˜ ëª¨ë“  ë™ì‘ì´ ì´ê³³ì— í…ìŠ¤íŠ¸ë¡œ ê¸°ë¡ë©ë‹ˆë‹¤."
      selector:
        entity:
          domain: input_text

trigger:
  - platform: state
    id: switch_on
    entity_id: !input input_boolean_switch
    from: "off"
    to: "on"
  - platform: state
    id: switch_off
    entity_id: !input input_boolean_switch
    from: "on"
    to: "off"
  - platform: state
    id: ac_on
    entity_id: !input climate_entity
    from: "off"
    to:
      - "cool"
      - "dry"
  - platform: state
    id: fan_on
    entity_id: !input climate_entity
    from: "off"
    to:
      - "fan_only"
  - platform: state
    id: ac_off
    entity_id: !input climate_entity
    to: "off"
  - platform: state
    id: discomfort_change
    entity_id:
      - !input input_number_now_discomfort
      - !input input_number_target_discomfort
      - !input input_number_dehumid_threshold
  - platform: state
    id: index_on
    entity_id:
      - !input input_index_mode
      - !input input_boost_mode
      - !input input_dry_mode
    from: "off"
    to: "on"
  - platform: state
    id: over_time
    entity_id: !input input_index_mode
    to: "off"
    for: "00:30:00"
  - platform: time_pattern
    id: time_change
    minutes: "/1"
  - platform: time_pattern
    id: time_change_idx
    minutes: "/1"
  - platform: event
    id: timer_finished
    event_type: timer.finished
    event_data:
      entity_id: !input automation_timer

variables:
  ac: !input climate_entity
  sw: !input input_boolean_switch
  timer: !input automation_timer
  temp_s: !input temperature_sensor
  hum_s: !input humidity_sensor
  boost_thr: !input input_number_boost_threshold
  boost_dur: !input input_number_boost_duration
  boost_fan: !input boost_aircon_fan_mode
  high_fan_mode: !input high_aircon_fan_mode
  dehum_thr: !input input_number_dehumid_threshold
  tol: !input input_number_tolerance
  n_idx: !input input_number_now_discomfort
  tgt_idx: !input input_number_target_discomfort
  gen_t: !input input_number_general_temperature
  gen_fan_mode: !input general_aircon_fan_mode
  shut_delay: !input input_number_shutdown_delay
  
  # Mode Toggles
  boost_mode: !input input_boost_mode
  dry_mode: !input input_dry_mode
  idx_mode: !input input_index_mode
  end_mode: !input input_end_mode
  end_mode_now: !input input_end_mode_now

  # Calculated Values
  temperature: "{{ states(temp_s) | float(0) }}"
  humidity: "{{ states(hum_s) | float(0) }}"
  dehumidity: "{{ states(dehum_thr) | float(0) }}"
  discomfort_index: "{{ states(n_idx) | float(0) }}"
  target_discomfort: "{{ states(tgt_idx) | float(0) }}"
  time_tra: !input input_time_tracker
  shut_delay_time: "{{ shut_delay | float(0)}}"
  discomfort_index_cal: >
    {{ (0.81 * temperature + 0.01 * humidity * (0.99 * temperature - 14.3) + 46.3) | round(1) }}

action:
  - choose:
      # 1) ê°€ìƒ ìŠ¤ìœ„ì¹˜/ì—ì–´ì»¨ ON
      - conditions:
          - condition: trigger
            id:
              - switch_on
              - ac_on
              - fan_on
          - condition: template
            value_template: >
              {{ trigger.id != 'fan_on' or is_state(end_mode_now, 'off') }}
        sequence:
          - service: timer.cancel
            target:
              entity_id: !input automation_timer
          - service: input_boolean.turn_on
            target:
              entity_id: !input input_boolean_switch
          - service: input_boolean.turn_off
            target:
              entity_id:
                - !input input_boost_mode
                - !input input_dry_mode
                - !input input_index_mode
                - !input input_end_mode
                - !input input_end_mode_now
          - delay: "00:00:01"
          - service: climate.set_hvac_mode
            target:
              entity_id: !input climate_entity
            data:
              hvac_mode: cool
          - delay: "00:00:01"
          - service: climate.set_temperature
            target:
              entity_id: !input climate_entity
            data:
              temperature: "{{ gen_t }}"
          - delay: "00:00:01"
          - choose:
              - conditions:
                  - condition: numeric_state
                    entity_id: !input temperature_sensor
                    above: !input input_number_boost_threshold
                  - condition: template
                    value_template: "{{ boost_dur | int(0) > 0 }}"
                sequence:
                  - service: climate.set_temperature
                    target:
                      entity_id: !input climate_entity
                    data:
                      temperature: 18
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ boost_fan }}"
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_boost_mode
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON ğŸš€ë¶€ìŠ¤íŠ¸ëª¨ë“œ({{ boost_dur }}ë¶„) ì˜¨ë„: {{ temperature }}â„ƒ ìŠµë„ : {{ humidity }}% ê¸°ì¤€ :{{ boost_thr }} ì§€ìˆ˜: {{ discomfort_index }}
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration:
                        minutes: "{{ boost_dur | int(0) }}"
                  - wait_for_trigger:
                      - platform: numeric_state
                        entity_id: !input input_number_now_discomfort
                        below: !input input_number_target_discomfort
                      - platform: numeric_state
                        entity_id: !input temperature_sensor
                        below: !input input_number_general_temperature
                      - platform: state
                        entity_id: !input input_boolean_switch
                        to: 'off'
                    timeout:
                      minutes: "{{ boost_dur | int(0) }}"
                    continue_on_timeout: true
                  - service: timer.cancel
                    target:
                      entity_id: !input automation_timer
                  - choose:
                      - conditions:
                          - condition: state
                            entity_id: !input input_boolean_switch
                            state: "on"
                        sequence:
                          - service: climate.set_temperature
                            target:
                              entity_id: !input climate_entity
                            data:
                              temperature: "{{ gen_t }}"
                          - service: climate.set_fan_mode
                            target:
                              entity_id: !input climate_entity
                            data:
                              fan_mode: "{{ gen_fan_mode }}"
                          - service: input_boolean.turn_off
                            target:
                              entity_id: !input input_boost_mode
                          - service: input_boolean.turn_on
                            target:
                              entity_id: !input input_end_mode
                          - service: input_text.set_value
                            target:
                              entity_id: !input input_log
                            data:
                              value: >
                                {{ now().strftime('%m-%d %H:%M') }} | OFF ğŸ“´ë¶€ìŠ¤íŠ¸ëª¨ë“œ (ì¡°ê±´ ì¶©ì¡±) ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
            default:
              - service: climate.set_hvac_mode
                target:
                  entity_id: !input climate_entity
                data:
                  hvac_mode: cool
              - service: climate.set_temperature
                target:
                  entity_id: !input climate_entity
                data:
                  temperature: "{{ gen_t }}"
              - delay: "00:00:01"
              - service: climate.set_fan_mode
                target:
                  entity_id: !input climate_entity
                data:
                  fan_mode: "{{ gen_fan_mode }}"
              - service: input_text.set_value
                target:
                  entity_id: !input input_log
                data:
                  value: >
                    {{ now().strftime('%m-%d %H:%M') }} | ON ì—ì–´ì»¨ ì‘ë™ì¤‘ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
              - delay: "00:10:00"
              - service: input_boolean.turn_on
                target:
                  entity_id: !input input_end_mode

      # 2) ë¶ˆì¾Œì§€ìˆ˜/ìŠµë„ ë³€í™”ì— ë”°ë¥¸ ëª¨ë“œ ì œì–´
      - conditions:
          - condition: trigger
            id: discomfort_change
          - condition: state
            entity_id: !input input_boolean_switch
            state: "on"
          - condition: state
            entity_id: !input input_boost_mode
            state: "off"
          - condition: state
            entity_id: !input input_index_mode
            state: "off"
          - condition: state
            entity_id: !input input_dry_mode
            state: "off"
          - condition: state
            entity_id: !input input_end_mode_now
            state: "off"
        sequence:
          - service: timer.cancel
            target:
              entity_id: !input automation_timer
          - choose:
              # ì œìŠµ ëª¨ë“œ
              - conditions:
                  - condition: numeric_state
                    entity_id: !input humidity_sensor
                    above: !input input_number_dehumid_threshold
                sequence:
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_dry_mode
                  - delay: "00:00:01"
                  - service: climate.set_hvac_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      hvac_mode: dry
                  - delay: "00:00:01"
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ high_fan_mode }}"
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON ğŸ’§ì œìŠµëª¨ë“œ 1ë‹¨ê³„ (ì œìŠµ 10ë¶„) ì‹œì‘ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration: "00:15:00"
                  - delay: "00:10:00"
                  - choose:
                      - conditions:
                          - condition: state
                            entity_id: !input input_boolean_switch
                            state: "on"
                        sequence:
                          - service: climate.set_hvac_mode
                            target:
                              entity_id: !input climate_entity
                            data:
                              hvac_mode: cool
                          - service: climate.set_fan_mode
                            target:
                              entity_id: !input climate_entity
                            data:
                              fan_mode: "{{ high_fan_mode }}"
                          - service: climate.set_temperature
                            target:
                              entity_id: !input climate_entity
                            data:
                              temperature: "{{ gen_t }}"
                          - service: input_boolean.turn_on
                            target:
                              entity_id: !input input_end_mode
                          - service: input_text.set_value
                            target:
                              entity_id: !input input_log
                            data:
                              value: >
                                {{ now().strftime('%m-%d %H:%M') }} | ğŸ’§ì œìŠµëª¨ë“œ 2ë‹¨ê³„(ëƒ‰ë°© 5ë¶„) ì‹œì‘ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}

              # ë¶ˆì¾Œì§€ìˆ˜ ë†’ìŒ
              - conditions:
                  - condition: template
                    value_template: "{{ discomfort_index > (target_discomfort + tol) }}"
                sequence:
                  - delay: "00:00:01"
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_index_mode
                  - service: climate.set_hvac_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      hvac_mode: cool
                  - delay: "00:00:01"
                  - service: climate.set_temperature
                    target:
                      entity_id: !input climate_entity
                    data:
                      temperature: "{{ gen_t }}"
                  - delay: "00:00:01"
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ high_fan_mode }}"
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON ğŸŒ¡ì§€ìˆ˜ë†’ìŒ(ëƒ‰ë°©10ë¶„) ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }} > ëª©í‘œ: {{ target_discomfort }} (+{{ tol }})
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration: "00:10:00"
              # ë¶ˆì¾Œì§€ìˆ˜ ë‚®ìŒ
              - conditions:
                  - condition: template
                    value_template: "{{ discomfort_index < (target_discomfort - tol) }}"
                sequence:
                  - delay: "00:00:01"
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_index_mode
                  - service: climate.set_hvac_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      hvac_mode: fan_only
                  - delay: "00:00:01"
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ gen_fan_mode }}"
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON ğŸƒì§€ìˆ˜ë‚®ìŒ(ì†¡í’10ë¶„) ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }} < ëª©í‘œ: {{ target_discomfort }} (-{{ tol }})
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration: "00:10:00"
              # ë¶ˆì¾Œì§€ìˆ˜ ì ì •
              - conditions:
                  - condition: state
                    entity_id: !input input_boolean_switch
                    state: "on"
                sequence:
                  - delay: "00:00:01"
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_index_mode
                  - service: climate.set_hvac_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      hvac_mode: fan_only
                  - delay: "00:00:01"
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ gen_fan_mode }}"
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON âš–ï¸ì§€ìˆ˜ì ì • 1ë‹¨ê³„(ì†¡í’10ë¶„) ì‹œì‘, ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration: "00:15:00"
                  - delay: "00:10:00"
                  - choose:
                      - conditions:
                          - condition: state
                            entity_id: !input input_boolean_switch
                            state: "on"
                        sequence:
                          - service: climate.set_hvac_mode
                            target:
                              entity_id: !input climate_entity
                            data:
                              hvac_mode: cool
                          - service: climate.set_temperature
                            target:
                              entity_id: !input climate_entity
                            data:
                              temperature: "{{ gen_t }}"
                          - service: input_boolean.turn_on
                            target:
                              entity_id: !input input_end_mode
                          - service: input_text.set_value
                            target:
                              entity_id: !input input_log
                            data:
                              value: >
                                {{ now().strftime('%m-%d %H:%M') }} | âš–ï¸ì§€ìˆ˜ì ì • 2ë‹¨ê³„(ëƒ‰ë°© 5ë¶„) ì‹œì‘ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}


      # 3) ê°€ìƒ ìŠ¤ìœ„ì¹˜ OFF (ì¢…ë£Œ ëª¨ë“œ)
      - conditions:
          - condition: trigger
            id: switch_off
        sequence:
          - choose:
              - conditions:
                  - condition: state
                    entity_id: !input input_end_mode
                    state: "on"
                  - condition: state
                    entity_id: !input input_end_mode_now
                    state: "off"
                  - condition: template
                    value_template: "{{ shut_delay | int(0) > 0 }}"
                sequence:
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_end_mode_now
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_index_mode
                  - delay: "00:00:01"
                  - service: climate.set_hvac_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      hvac_mode: fan_only
                  - service: climate.set_fan_mode
                    target:
                      entity_id: !input climate_entity
                    data:
                      fan_mode: "{{ high_fan_mode }}"
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | ON ğŸ›‘ì¢…ë£Œëª¨ë“œ {{ shut_delay_time }} ë¶„ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
                  - service: timer.start
                    target:
                      entity_id: !input automation_timer
                    data:
                      duration:
                        minutes: "{{ shut_delay | int(0) }}"
            default:
              - service: input_boolean.turn_off
                target:
                  entity_id:
                    - !input input_boolean_switch
                    - !input input_index_mode
                    - !input input_boost_mode
                    - !input input_dry_mode
                    - !input input_end_mode
                    - !input input_end_mode_now
              - delay: "00:00:01"
              - service: climate.turn_off
                target:
                  entity_id: !input climate_entity
              - service: input_text.set_value
                target:
                  entity_id: !input input_log
                data:
                  value: >
                    {{ now().strftime('%m-%d %H:%M') }} ì¢…ë£Œëª¨ë“œì‘ë™í•˜ì§€ ì•ŠìŒ |ğŸ›‘ì‹œìŠ¤í…œì¢…ë£Œ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}

      # 4) íƒ€ì´ë¨¸ ì™„ë£Œ ì‹œ í›„ì† ì¡°ì¹˜
      - conditions:
          - condition: trigger
            id: timer_finished
        sequence:
          - choose:
              # Case 4-1: ì¢…ë£Œ ëª¨ë“œ íƒ€ì´ë¨¸ ì™„ë£Œ
              - conditions:
                  - condition: template
                    value_template: "{{ is_state(end_mode_now, 'on') }}"
                sequence:
                  - service: input_boolean.turn_off
                    target:
                      entity_id:
                        - !input input_index_mode
                        - !input input_boost_mode
                        - !input input_dry_mode
                        - !input input_end_mode
                        - !input input_end_mode_now
                  - service: climate.turn_off
                    target:
                      entity_id: !input climate_entity
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} |ğŸ›‘ì‹œìŠ¤í…œì¢…ë£Œ ì‹œìŠ¤í…œì„ ì™„ì „íˆ ì¢…ë£Œí•©ë‹ˆë‹¤. ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}
              # Case 4-4: ì œìŠµ ëª¨ë“œ 2ë‹¨ê³„ (ëƒ‰ë°©) ì™„ë£Œ
              - conditions:
                  - condition: template
                    value_template: "{{ is_state(dry_mode, 'on') and is_state(ac, 'cool') }}"
                sequence:
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_end_mode
                  - service: input_boolean.turn_off
                    target:
                      entity_id: !input input_dry_mode
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: "{{ now().strftime('%m-%d %H:%M') }} | OFF ğŸ”ì œìŠµëª¨ë“œ ì™„ë£Œ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }} " 
              # Case 4-6: ë¶ˆì¾Œì§€ìˆ˜ ê´€ë ¨ ëª¨ë“œ(ë†’ìŒ/ë‚®ìŒ/ì ì •2ë‹¨ê³„) ì™„ë£Œ 
              - conditions:
                  - condition: template
                    value_template: "{{ is_state(idx_mode, 'on') }}"
                sequence:
                  - service: input_boolean.turn_on
                    target:
                      entity_id: !input input_end_mode
                  - service: input_boolean.turn_off
                    target:
                      entity_id: !input input_index_mode
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} | OFF ğŸ“´ë¶ˆì¾Œì§€ìˆ˜ ëª¨ë“œ ì™„ë£Œ ì˜¨ë„: {{ temperature }}â„ƒ / ìŠµë„: {{ humidity }}% ì§€ìˆ˜: {{ discomfort_index }}

      # 5) ì—ì–´ì»¨ OFF ê°ì§€ (ìŠ¤ìœ„ì¹˜ ë™ê¸°í™”)
      - conditions:
          - condition: trigger
            id: ac_off
        sequence:
          - service: input_boolean.turn_off
            target:
              entity_id: !input input_boolean_switch

      # 6) 1ë¶„ë§ˆë‹¤ ë¶ˆì¾Œì§€ìˆ˜ ì—…ë°ì´íŠ¸
      - conditions:
          - condition: trigger
            id: time_change_idx
        sequence:
          - service: input_number.set_value
            target:
              entity_id: !input input_number_now_discomfort
            data:
              value: "{{ discomfort_index_cal }}"

      # 7) ì‹œê°„ ê¸°ë°˜ ì•ˆì „ì¥ì¹˜ (íƒ€ì„ì•„ì›ƒ ë“±)
      - conditions:
          - condition: trigger
            id:
              - index_on
              - time_change
              - over_time
        sequence:
          - choose:
              - conditions:
                  - condition: trigger
                    id: index_on
                sequence:
                  - service: input_datetime.set_datetime
                    target:
                      entity_id: !input input_time_tracker
                    data:
                      datetime: "{{ now().isoformat() }}"
              - conditions:
                  - condition: trigger
                    id: time_change
                  - condition: state
                    entity_id: !input input_boolean_switch
                    state: "on"
                  - condition: state
                    entity_id: !input input_end_mode_now
                    state: "off"
                  - condition: template
                    value_template: >
                      {% set on_time = states(time_tra) %}
                      {% if on_time in ['unknown', 'unavailable', None] %}
                        false
                      {% else %}
                        {{ (now() - as_local(as_datetime(on_time))).total_seconds() > 1200 }}
                      {% endif %}
                sequence:
                  - service: input_boolean.turn_off
                    target:
                      entity_id:
                        - !input input_boost_mode
                        - !input input_dry_mode
                        - !input input_index_mode
                  - service: input_text.set_value
                    target:
                      entity_id: !input input_log
                    data:
                      value: >
                        {{ now().strftime('%m-%d %H:%M') }} ++ë¶ˆì¾Œì§€ìˆ˜ëª¨ë“œ ì‘ë™ 20ë¶„ê²½ê³¼ë˜ì–´ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.++
              - conditions:
                  - condition: trigger
                    id: over_time
                  - condition: state
                    entity_id: !input input_boolean_switch
                    state: "on"
                sequence:
                  - service: input_boolean.turn_off
                    target:
                      entity_id:
                        - !input input_boost_mode
                        - !input input_dry_mode

mode: parallel
